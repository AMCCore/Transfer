@model Transfer.Web.Models.TripRequest.RequestSearchFilter

@using X.PagedList.Mvc.Core;
@using X.PagedList.Web.Common
@using Transfer.Bl.Dto;

<div class="row blank-row"></div>
@Html.HiddenFor(x => x.PageNumber)
<div class="row blank-row"></div>
<div class="row ordering">
    <div class="t-col col-3">
        <i class="far fa-question-circle fa-lg"></i>
        Параметры сортировки запросов:
    </div>
    <div class="t-col col-6">
        @Html.CheckBoxFor(x => x.OrderByName, new { @class="btn-check", autocomplete="off", onclick="DisableCheckboxes(this)" })
        <label class="btn btn-sm" for="OrderByName">
            <i class="fas fa-caret-down"></i>
            <i class="fas fa-sort-alpha-down"></i>
        </label>
        &nbsp;&nbsp;&nbsp;
        @Html.CheckBoxFor(x => x.OrderByRating, new { @class="btn-check", autocomplete="off", onclick="DisableCheckboxes(this)" })
        <label class="btn btn-sm" for="OrderByRating">
            <i class="fas fa-caret-down"></i>
            <i class="fas fa-star"></i>
        </label>
        &nbsp;&nbsp;&nbsp;
        @Html.CheckBoxFor(x => x.OrderByChecked, new { @class="btn-check", autocomplete="off", onclick="DisableCheckboxes(this)" })
        <label class="btn btn-sm" for="OrderByChecked">
            <i class="fas fa-caret-down"></i>
            <i class="fas fa-lock-open"></i>
        </label>
        &nbsp;&nbsp;&nbsp;
        @Html.CheckBoxFor(x => x.OrderByChild, new { @class="btn-check", autocomplete="off", onclick="DisableCheckboxes(this)" })
        <label class="btn btn-sm" for="OrderByChild">
            <i class="fas fa-caret-down"></i>
            <i class="fas fa-child"></i>
        </label>
    </div>
    <div class="t-col col-2 text-end form-group">
        Выводить по:
    </div>
    <div class="t-col col-1 text-end form-group">
        @Html.DropDownListFor(x => x.PageSize, new List<SelectListItem> { new SelectListItem("1", "1"), new SelectListItem("5", "5"), new SelectListItem("10", "10"), new SelectListItem("25", "25") }, null, new { @class = "form-select form-select-sm", @onchange="DisableCheckboxes(this)" })
    </div>
</div>
<hr style="color: #007896; border: dashed 1px #007896;">
@{
    int counter = 0;
}
@foreach (var c in Model.Results)
{
    if (counter > 0)
    {
        <hr style="color: #fff; border: dashed 1px #007896;">
    }
    counter++;

    <div class="row blank-row"></div>
    <div class="row">
        <div class="col-12">
            <div class="container trip-request">
                <div class="row blank-row"></div>
                <div class="row">
                    <div class="col-9">
                        <div class="row">
                            <div class="t-col col-12"><span style="font-size: 1.2rem;">@c.Name</span> <i class="fas fa-star fs-sm" style="color: #ecbf54"></i><i class="fas fa-star fs-sm" style="color: #ecbf54"></i><i class="fas fa-star fs-sm" style="color: #ecbf54"></i><i class="far fa-star fs-sm"></i><i class="far fa-star fs-sm"></i></div>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <div class="row">
                                    <div class="col-12 r-logo text-center"><img alt="" src="~/images/20000968.png" style="margin: 18px 0;" /></div>
                                    <div class="col-12 t-col text-center go"><a asp-action="TripRequest" asp-controller="TripRequest" asp-route-requestId="@c.Id"><span>перейти</span></a></div>
                                </div>
                            </div>
                            <div class="col-9">
                                <div class="row">
                                    <div class="t-col col-12"><i class="fas fa-shuttle-van"></i> Название класса транспортного средства</div>
                                    <div class="t-col col-12"><i class="fas fa-map-marked"></i> @c.AddressFrom</div>
                                    <div class="t-col col-12"><i class="fas fa-map-marked-alt"></i> @c.AddressTo</div>
                                    <div class="t-col col-12"><i class="far fa-user-circle"></i> @c.ContactFio, <a href="#">@c.ContactPhone</a>, <a href="#">@c.ContactEmail</a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="row">
                            <div class="t-col col-12">Дата: @($"{c.TripDate:dd.MM.yyyy HH:mm}")</div>
                        </div>
                        <div class="row">
                            <div class="t-col col-12">Пссажиры: @c.Passengers</div>
                        </div>
                        @if (c.TripOptions?.Any() ?? false)
                        {
                            <div class="row">
                                <div class="t-col col-12">
                                    <h6>Особенности поездки:</h6>
                                    @await Html.PartialAsync("~/Views/Shared/_TripOptions.cshtml", c.TripOptions)
                                </div>
                            </div>
                        }
                    </div>
                </div>
                <div class="row blank-row"></div>
            </div>
        </div>
    </div>
    <div class="row blank-row"></div>
}
<hr style="color: #007896; border: dashed 1px #007896;">
<div class="row">
    <div class="t-col col-12">
        @Html.PagedListPager(Model.Results, page =>
        {
        Model.Results = null;
        Model.PageNumber = page;
        return Url.Action("Search", "TripRequest", Model);
        }, PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(
        new PagedListRenderOptions {
        DisplayItemSliceAndTotal = false,
        ItemSliceAndTotalFormat = "Всего записей: {2} ",
        DisplayLinkToPreviousPage = PagedListDisplayMode.IfNeeded,
        DisplayLinkToNextPage = PagedListDisplayMode.IfNeeded,
        LinkToPreviousPageFormat = "Назад",
        LinkToNextPageFormat = "Вперед"

        },
        new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "TripRequestSearch", InsertionMode = InsertionMode.Replace }))
    </div>
</div>
<div class="row blank-row"></div>