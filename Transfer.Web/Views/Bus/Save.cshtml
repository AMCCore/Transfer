@model Transfer.Bl.Dto.Bus.BusDto
@using Transfer.Common.Extensions

@section Styles {
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.2.7/css/fileinput.min.css" integrity="sha512-qPjB0hQKYTx1Za9Xip5h0PXcxaR1cRbHuZHo9z+gb5IgM6ZOTtIH4QLITCxcCp/8RMXtw2Z85MIZLv6LfGTLiw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
}

@section Scripts {
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.2.7/js/fileinput.min.js" integrity="sha512-CCLv901EuJXf3k0OrE5qix8s2HaCDpjeBERR2wVHUwzEIc7jfiK9wqJFssyMOc1lJ/KvYKsDenzxbDTAQ4nh1w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="~/js/Bus/Save.js" crossorigin="anonymous"></script>
<script src="~/js/BasicSave.js" crossorigin="anonymous"></script>
}

<div class="container">
    <div class="row blank-row"></div>
    <div class="row blank-row"></div>
    <div class="row">
        <div class="t-col col-12 crumbs">
            ---&nbsp;&nbsp;&nbsp;<a class="top-button-a" asp-controller="Home" asp-action="Index">Главная</a>
            &nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;<a class="top-button-a" asp-controller="Carrier" asp-action="Search">Перевозчики</a>
            &nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;<a class="top-button-a" asp-action="CarrierItem" asp-controller="Carrier" asp-route-carrierId="@Model.OrganisationId">@Model.OrganisationName</a>&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;
            @if (Model.Id.IsNullOrEmpty())
            {
                @:Новое транспортное средство
            }
            else
            {
                <a class="top-button-a" asp-action="BusItem" asp-controller="Bus" asp-route-carrierId="@Model.OrganisationId" asp-route-busId="@Model.Id">@Model.Make @Model.Model @Model.Yaer гв.</a>
            }
        </div>
    </div>
    <div class="row blank-row"></div>
    <div class="row">
        <div class="t-col col-12 col-md-6 crb-avatar">
            Здравствуйте, @Security.CurrentAccount.FirstName @Security.CurrentAccount.LastName!
        </div>
    </div>
    <div class="row blank-row"></div>
    <div class="row">
        <div class="t-col col-12">
            <h1 style="color: #0f4c71">@(Model.Id.IsNullOrEmpty() ? "Добавление нового транспортного средства" : "Редактирование транспортного средства")</h1>
        </div>
    </div>
    <div class="row blank-row"></div>
    <form asp-controller="Bus" asp-action="Save" method="post" id="mainSaveForm">
        @Html.AntiForgeryToken()
        @Html.HiddenFor(x => x.Id)
        @Html.HiddenFor(x => x.State)
        @Html.HiddenFor(x => x.LastUpdateTick)
        @Html.HiddenFor(x => x.OrganisationId)

        <div class="container the-form">
            <div class="row blank-row"></div>
            <h2 class="white-text">Основные данные:</h2>
            <div class="row form-row">
                <div class="t-col col-12 col-md-8">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Марка: <span class="red-text">*</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="t-col col-12 form-group">
                            <div class="input-group input-group-icon">
                                <i class="fas fa-pencil-alt input-group-text"></i>
                                <input asp-for="Make" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="t-col col-12 col-md-4">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Гос номер: <span class="red-text">*</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="t-col col-12 form-group">
                            <div class="input-group input-group-icon">
                                <i class="fas fa-pencil-alt input-group-text"></i>
                                <input asp-for="LicenseNumber" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row form-row">
                <div class="t-col col-12 col-md-8">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Модель: <span class="red-text">*</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="t-col col-12 form-group">
                            <div class="input-group input-group-icon">
                                <i class="fas fa-pencil-alt input-group-text"></i>
                                <input asp-for="Model" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="t-col col-12 col-md-4">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Год: <span class="red-text">*</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="t-col col-12 form-group">
                            <div class="input-group input-group-icon">
                                <i class="fas fa-pencil-alt input-group-text"></i>
                                <input asp-for="Yaer" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row blank-row"></div>
            <div class="row form-row">
                <div class="t-col col-12 col-md-2 white-text">
                    Посадочных мест: <span class="red-text">*</span>
                </div>
                <div class="t-col col-12 col-md-2 white-text">
                    <div class="input-group input-group-icon">
                        <i class="fas fa-pencil-alt input-group-text"></i>
                        <input asp-for="PeopleCopacity" class="form-control" />
                    </div>
                </div>
                <div class="t-col col-12 col-md-4 chk-label form-group">
                    <input asp-for="AirConditioner" class="form-check-input" />
                    <label for="AirConditioner">Наличие кондиционера</label>
                </div>

                <div class="t-col col-12 col-md-4 chk-label form-group">
                    <input asp-for="WC" class="form-check-input" />
                    <label for="WC">Наличие туалета</label>
                </div>
            </div>
            <div class="row blank-row"></div>
            <div class="row form-row">
                <div class="t-col col-12 col-md-4 chk-label form-group">
                    <input asp-for="SaftyBelts" class="form-check-input" />
                    <label for="SaftyBelts">Ремни безопасности</label>
                </div>
                <div class="t-col col-12 col-md-4 chk-label form-group">
                    <input asp-for="Microphone" class="form-check-input" />
                    <label for="Microphone">Наличие микрофона</label>
                </div>
                <div class="t-col col-12 col-md-4 chk-label form-group">
                    <input asp-for="TV" class="form-check-input" />
                    <label for="TV">Наличие телевизора</label>
                </div>
            </div>
            <div class="row blank-row"></div>
            <h2 class="white-text">Копии документов:</h2>
            <div class="row form-row">
                <input asp-for="RegFileId" type="hidden" class="form-control file-result-id">
                <div class="t-col file-upl col-12 col-md-6 @(!Model.RegFileId.IsNullOrEmpty() ? "d-none" : string.Empty)">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            СТС:
                        </div>
                    </div>
                    <div class="row">
                        <div class="t-col col-9 form-group">
                            <input type="text" class="form-control file-result-name" readonly="readonly" />
                        </div>
                        <div class="t-col col-3 form-group">
                            <input type="file" class="form-control input-file">
                        </div>
                    </div>
                </div>
                <div class="t-col file-dwn white-text col-12 col-md-6 form-group @(Model.RegFileId.IsNullOrEmpty() ? "d-none" : string.Empty)">
                    <div class="row">
                        <div class="t-col col-12 white-text">&nbsp;</div>
                    </div>
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            СТС: <a href="/File/GetFile?fileId=@Model.RegFileId" target="_blank" class="dwn-link"><i class="fas fa-cloud-download-alt"></i> скачать</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0);" onclick="DeleteFile(this)" class="dwn-link"><i class="fas fa-times"></i> удалить</a>
                        </div>
                    </div>
                </div>
                <div class="t-col col-12 col-md-3 form-group">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Серия:
                        </div>
                        <div class="t-col col-12 white-text">
                            <div class="input-group input-group-icon">
                                <i class="fas fa-pencil-alt input-group-text"></i>
                                <input asp-for="RegSeries" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="t-col col-12 col-md-3 form-group">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Номер:
                        </div>
                        <div class="t-col col-12 white-text">
                            <div class="input-group input-group-icon">
                                <i class="fas fa-pencil-alt input-group-text"></i>
                                <input asp-for="RegNumber" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row form-row">
                <input asp-for="OsagoFileId" type="hidden" class="form-control file-result-id">
                <div class="t-col file-upl col-12 col-md-6 @(!Model.OsagoFileId.IsNullOrEmpty() ? "d-none" : string.Empty)">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            ОСАГО:
                        </div>
                    </div>
                    <div class="row">
                        <div class="t-col col-9 form-group">
                            <input type="text" class="form-control file-result-name" readonly="readonly" />
                        </div>
                        <div class="t-col col-3 form-group">
                            <input type="file" class="form-control input-file">
                        </div>
                    </div>
                </div>
                <div class="t-col file-dwn white-text col-12 col-md-6 form-group @(Model.OsagoFileId.IsNullOrEmpty() ? "d-none" : string.Empty)">
                    <div class="row">
                        <div class="t-col col-12 white-text">&nbsp;</div>
                    </div>
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Полис ОСАГО: <a href="/File/GetFile?fileId=@Model.OsagoFileId" target="_blank" class="dwn-link"><i class="fas fa-cloud-download-alt"></i> скачать</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0);" onclick="DeleteFile(this)" class="dwn-link"><i class="fas fa-times"></i> удалить</a>
                        </div>
                    </div>
                </div>
                <div class="t-col col-12 col-md-3 form-group">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Серия:
                        </div>
                        <div class="t-col col-12 white-text">
                            <div class="input-group input-group-icon">
                                <i class="fas fa-pencil-alt input-group-text"></i>
                                <input asp-for="OSAGOSeries" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="t-col col-12 col-md-3 form-group">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Номер:
                        </div>
                        <div class="t-col col-12 white-text">
                            <div class="input-group input-group-icon">
                                <i class="fas fa-pencil-alt input-group-text"></i>
                                <input asp-for="OSAGONumber" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="row form-row">
                <input asp-for="ToFileId" type="hidden" class="form-control file-result-id">
                <div class="t-col file-upl col-12 col-md-6 @(!Model.ToFileId.IsNullOrEmpty() ? "d-none" : string.Empty)">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Диагностическая карта:
                        </div>
                    </div>
                    <div class="row">
                        <div class="t-col col-8 form-group">
                            <input type="text" class="form-control file-result-name" readonly="readonly" />
                        </div>
                        <div class="t-col col-4 form-group">
                            <input type="file" class="form-control input-file">
                        </div>
                    </div>
                </div>
                <div class="t-col file-dwn white-text col-12 col-md-6 form-group @(Model.ToFileId.IsNullOrEmpty() ? "d-none" : string.Empty)">
                    <div class="row">
                        <div class="t-col col-12 white-text">&nbsp;</div>
                    </div>
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Диагностическая карта: <a href="/File/GetFile?fileId=@Model.ToFileId" target="_blank" class="dwn-link"><i class="fas fa-cloud-download-alt"></i> скачать</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0);" onclick="DeleteFile(this)" class="dwn-link"><i class="fas fa-times"></i> удалить</a>
                        </div>
                    </div>
                </div>
                <div class="t-col col-12 col-md-3 form-group">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Номер:
                        </div>
                        <div class="t-col col-12 white-text">
                            <div class="input-group input-group-icon">
                                <i class="fas fa-pencil-alt input-group-text"></i>
                                <input asp-for="ToNumber" class="form-control" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="t-col col-12 col-md-3 form-group">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Срок действия:
                        </div>
                        <div class="t-col col-12 white-text">
                            <div class="input-group input-group-icon">
                                <i class="fas fa-pencil-alt input-group-text"></i>
                                <input asp-for="ToDate" type="date" class="form-control" min="@DateTime.Now.AddDays(30).ToString("yyyy-MM-dd")" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row form-row">
                <input asp-for="OsgopFileId" type="hidden" class="form-control file-result-id">
                <div class="t-col file-upl col-12 col-md-8 @(!Model.OsgopFileId.IsNullOrEmpty() ? "d-none" : string.Empty)">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            ОСГОП:
                        </div>
                    </div>
                    <div class="row">
                        <div class="t-col col-10 form-group">
                            <input type="text" class="form-control file-result-name" readonly="readonly" />
                        </div>
                        <div class="t-col col-2 form-group">
                            <input type="file" class="form-control input-file">
                        </div>
                    </div>
                </div>
                <div class="t-col file-dwn white-text col-12 form-group @(Model.OsgopFileId.IsNullOrEmpty() ? "d-none" : string.Empty)">
                    ОСГОП: <a href="/File/GetFile?fileId=@Model.OsgopFileId" target="_blank" class="dwn-link"><i class="fas fa-cloud-download-alt"></i> скачать</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0);" onclick="DeleteFile(this)" class="dwn-link"><i class="fas fa-times"></i> удалить</a>
                </div>
            </div>
            <div class="row form-row">
                <input asp-for="TahografFileId" type="hidden" class="file-result-id">
                <div class="t-col file-upl col-12 col-md-8 @(!Model.TahografFileId.IsNullOrEmpty() ? "d-none" : string.Empty)">
                    <div class="row">
                        <div class="t-col col-12 white-text">
                            Калибровка тахографа:
                        </div>
                    </div>
                    <div class="row">
                        <div class="t-col col-10 form-group">
                            <input type="text" class="form-control file-result-name" readonly="readonly" />
                        </div>
                        <div class="t-col col-2 form-group">
                            <input type="file" class="form-control input-file">
                        </div>
                    </div>
                </div>
                <div class="t-col file-dwn white-text col-12 form-group @(Model.TahografFileId.IsNullOrEmpty() ? "d-none" : string.Empty)">
                    Калибровка тахографа: <a href="/File/GetFile?fileId=@Model.TahografFileId" target="_blank" class="dwn-link"><i class="fas fa-cloud-download-alt"></i> скачать</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0);" onclick="DeleteFile(this)" class="dwn-link"><i class="fas fa-times"></i> удалить</a>
                </div>
            </div>
            <div class="row blank-row"></div>
            <h2 class="white-text">Фотографии транспортного средства:</h2>
            <div class="row">
                <div class="col-4 col-md-2">
                    <div class="form-row">
                        <input asp-for="Photo1" type="hidden" class="file-result-id">
                        <div class="col-12 col-p-e @(!Model.Photo1.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div style="border: 1px dashed #007896; height: 200px; border-radius: 9px;">
                                <input type="file" class="form-control input-photo-file">
                            </div>
                        </div>
                        <div class="col-12 col-p-u @(Model.Photo1.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div class="col-p-u-i" style="border: 1px dashed #007896; height: 200px; border-radius: 9px; background-position: center center; background-size: cover; background-image: url('/File/GetFile?fileId=@Model.Photo1'">
                                <a href="javascript:void(0);" class="i-button" onclick="DeleteFile(this)"><div class="add-photo-link"><i class="fas fa-times-circle"></i></div></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4 col-md-2">
                    <div class="form-row">
                        <input asp-for="Photo2" type="hidden" class="file-result-id">
                        <div class="col-12 col-p-e @(!Model.Photo2.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div style="border: 1px dashed #007896; height: 200px; border-radius: 9px;">
                                <input type="file" class="form-control input-photo-file">
                            </div>
                        </div>
                        <div class="col-12 col-p-u @(Model.Photo2.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div class="col-p-u-i" style="border: 1px dashed #007896; height: 200px; border-radius: 9px; background-position: center center; background-size: cover; background-image: url('/File/GetFile?fileId=@Model.Photo2'">
                                <a href="javascript:void(0);" class="i-button" onclick="DeleteFile(this)"><div class="add-photo-link"><i class="fas fa-times-circle"></i></div></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4 col-md-2">
                    <div class="form-row">
                        <input asp-for="Photo3" type="hidden" class="file-result-id">
                        <div class="col-12 col-p-e @(!Model.Photo3.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div style="border: 1px dashed #007896; height: 200px; border-radius: 9px;">
                                <input type="file" class="form-control input-photo-file">
                            </div>
                        </div>
                        <div class="col-12 col-p-u @(Model.Photo3.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div class="col-p-u-i" style="border: 1px dashed #007896; height: 200px; border-radius: 9px; background-position: center center; background-size: cover; background-image: url('/File/GetFile?fileId=@Model.Photo3'">
                                <a href="javascript:void(0);" class="i-button" onclick="DeleteFile(this)"><div class="add-photo-link"><i class="fas fa-times-circle"></i></div></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4 col-md-2">
                    <div class="form-row">
                        <input asp-for="Photo4" type="hidden" class="file-result-id">
                        <div class="col-12 col-p-e @(!Model.Photo4.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div style="border: 1px dashed #007896; height: 200px; border-radius: 9px;">
                                <input type="file" class="form-control input-photo-file">
                            </div>
                        </div>
                        <div class="col-12 col-p-u @(Model.Photo4.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div class="col-p-u-i" style="border: 1px dashed #007896; height: 200px; border-radius: 9px; background-position: center center; background-size: cover; background-image: url('/File/GetFile?fileId=@Model.Photo4'">
                                <a href="javascript:void(0);" class="i-button" onclick="DeleteFile(this)"><div class="add-photo-link"><i class="fas fa-times-circle"></i></div></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4 col-md-2">
                    <div class="form-row">
                        <input asp-for="Photo5" type="hidden" class="file-result-id">
                        <div class="col-12 col-p-e @(!Model.Photo5.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div style="border: 1px dashed #007896; height: 200px; border-radius: 9px;">
                                <input type="file" class="form-control input-photo-file">
                            </div>
                        </div>
                        <div class="col-12 col-p-u @(Model.Photo5.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div class="col-p-u-i" style="border: 1px dashed #007896; height: 200px; border-radius: 9px; background-position: center center; background-size: cover; background-image: url('/File/GetFile?fileId=@Model.Photo5'">
                                <a href="javascript:void(0);" class="i-button" onclick="DeleteFile(this)"><div class="add-photo-link"><i class="fas fa-times-circle"></i></div></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4 col-md-2">
                    <div class="form-row">
                        <input asp-for="Photo6" type="hidden" class="file-result-id">
                        <div class="col-12 col-p-e @(!Model.Photo6.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div style="border: 1px dashed #007896; height: 200px; border-radius: 9px;">
                                <input type="file" class="form-control input-photo-file">
                            </div>
                        </div>
                        <div class="col-12 col-p-u @(Model.Photo6.IsNullOrEmpty() ? "d-none" : string.Empty)">
                            <div class="col-p-u-i" style="border: 1px dashed #007896; height: 200px; border-radius: 9px; background-position: center center; background-size: cover; background-image: url('/File/GetFile?fileId=@Model.Photo6'">
                                <a href="javascript:void(0);" class="i-button" onclick="DeleteFile(this)"><div class="add-photo-link"><i class="fas fa-times-circle"></i></div></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row blank-row"></div>
            <div class="row form-row">
                <div class="t-col the-error col-6 col-md-10">
                    @if (!string.IsNullOrWhiteSpace(ViewBag.ErrorMsg))
                    {
                        <i class="fas fa-exclamation-triangle"></i> @ViewBag.ErrorMsg
                    }
                </div>
                <div class="t-col col-6 col-md-2 text-end">
                    <button type="submit" class="button-one">Сохранить</button>
                </div>
            </div>
            <div class="row blank-row"></div>
        </div>
        <div class="row blank-row"></div>
    </form>
    <div class="row blank-row"></div>
</div>